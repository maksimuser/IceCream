{"version":3,"sources":["js/modal.js"],"names":["minBlur","isUpdatingBlur","updateBlurStopTimeout","multiplier","$","fn","toggleBlur","v","blurId","data","value","css","webkitFilter","filter","setBlur","blur","Math","round","firstElementChild","setAttribute","initBlur","_multiplier","defs","get","each","i","blurClone","cloneNode","appendChild","offset","updateBlur","pos","lastPos","abs","left","requestAnimationFrame","startUpdatingBlur","stopDelay","clearTimeout","setTimeout","stopUpdatingBlur","document","ready","$modal","$overlay","blocked","unblockTimeout","TweenMax","set","autoAlpha","block","t","unblock","click","to","fromTo","x","window","width","scale","delay","rotationY","opacity","z","ease","Elastic","easeOut","easeParams","force3D","Quad","easeInOut","onComplete"],"mappings":"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","file":"modal.010df166.js","sourceRoot":"..\\src","sourcesContent":["(function(){\r\n    var minBlur=2,\r\n        maxBlur=200,\r\n        isUpdatingBlur=false,\r\n        updateBlurStopTimeout=null,\r\n        multiplier=0.25\r\n    ;\r\n        \r\n    $.fn.toggleBlur=function(v){\r\n        var blurId=$(this).data(\"blur-id\");\r\n        var value=v?\"url(#\"+blurId+\")\":\"none\";\r\n        $(this).css({\r\n            webkitFilter:value,\r\n            filter:value\r\n        });\r\n    }\r\n    $.fn.setBlur=function(v){\r\n        var blur=$(this).data(\"blur\");\r\n        v=Math.round(v);\r\n        if($(this).data(\"blur-value\")!=v){\r\n            if(v==0){\r\n                $(this).toggleBlur(false);\r\n            }else{\r\n                $(this).toggleBlur(true);\r\n\r\n                blur.firstElementChild.setAttribute(\"stdDeviation\",v+\",0\");\r\n                $(this).data(\"blur-value\",v);\r\n            }\r\n        }\r\n    }\r\n    $.fn.initBlur=function(_multiplier){\r\n        if(typeof _multiplier==\"undefined\") _multiplier=0.25;\r\n        multiplier=_multiplier;\r\n        var defs=$(\".filters defs\").get(0);\r\n        var blur=$(\"#blur\").get(0);\r\n        $(this).each(function(i){\r\n            var blurClone=blur.cloneNode(true);\r\n            var blurId=\"blur\"+i;\r\n            blurClone.setAttribute(\"id\",blurId);\r\n            defs.appendChild(blurClone);\r\n            $(this)\r\n                .data(\"blur\",blurClone)\r\n                .data(\"blur-id\",blurId)\r\n                .data(\"blur-value\",0)\r\n                .data(\"last-pos\",$(this).offset())\r\n            ;\r\n        });\r\n    }\r\n\r\n    $.updateBlur=function(){\r\n        $(\".js-blur\").each(function(){\r\n            var pos=$(this).offset();\r\n            var lastPos=$(this).data(\"last-pos\");\r\n            var v=Math.abs(pos.left-lastPos.left)*multiplier;\r\n            $(this).data(\"last-pos\",pos);\r\n            $(this).setBlur(v);\r\n        })\r\n        if(isUpdatingBlur){\r\n            requestAnimationFrame($.updateBlur);\r\n        }\r\n    }\r\n    $.startUpdatingBlur=function(stopDelay){\r\n        if(typeof stopDelay==\"undefined\"){\r\n            stopDelay=-1;\r\n        }\r\n        if(updateBlurStopTimeout!=null){\r\n            clearTimeout(updateBlurStopTimeout);\r\n            updateBlurStopTimeout=null;\r\n        }\r\n        if(!isUpdatingBlur){\r\n            isUpdatingBlur=true;\r\n            $.updateBlur();\r\n        }\r\n        if(stopDelay>-1){\r\n            updateBlurStopTimeout=setTimeout($.stopUpdatingBlur,stopDelay);\r\n        }\r\n    }\r\n    $.stopUpdatingBlur=function(){\r\n        isUpdatingBlur=false;\r\n    }\r\n})();\r\n\r\n// Modal Window\r\n$(document).ready(function() {\r\n    var $modal = $(\".modal\"),\r\n        $overlay = $(\".modal-overlay\"),\r\n        blocked = false,\r\n        unblockTimeout=null\r\n    ;\r\n\r\n    TweenMax.set($modal,{\r\n        autoAlpha:0\r\n    })\r\n\r\n    var isOpen = false;\r\n\r\n    function openModal() {\r\n        if (!blocked) {\r\n            block(400);\r\n\r\n            TweenMax.to($overlay, 0.3, {\r\n                autoAlpha: 1\r\n            });\r\n\r\n            TweenMax.fromTo($modal, 0.5, {\r\n                x: (-$(window).width() - $modal.width()) / 2 - 50,\r\n                scale:0.9,\r\n                autoAlpha:1\r\n            }, {\r\n                delay: 0.1,\r\n                rotationY:0,\r\n                scale:1,\r\n                opacity:1,\r\n                x: 0,\r\n                z:0,\r\n                ease: Elastic.easeOut,\r\n                easeParams: [0.4, 0.3],\r\n                force3D: false\r\n            });\r\n            $.startUpdatingBlur(800);\r\n        }\r\n    }\r\n\r\n    function closeModal() {\r\n        if(!blocked){\r\n            block(400);\r\n            TweenMax.to($overlay, 0.3, {\r\n                delay: 0.3,\r\n                autoAlpha: 0\r\n            });\r\n            TweenMax.to($modal, 0.3,{\r\n                x: ($(window).width() + $modal.width()) / 2 + 100,\r\n                scale:0.9,\r\n                ease: Quad.easeInOut,\r\n                force3D: false,\r\n                onComplete:function(){\r\n                    TweenMax.set($modal,{\r\n                        autoAlpha:0\r\n                    });\r\n                }\r\n            });\r\n            $.startUpdatingBlur(400);\r\n        }\r\n    }\r\n    function block(t){\r\n        blocked=true;\r\n        if(unblockTimeout!=null){\r\n            clearTimeout(unblockTimeout);\r\n            unblockTimeout=null;\r\n        }\r\n        unblockTimeout=setTimeout(unblock,t);\r\n    }\r\n    function unblock(){\r\n        blocked=false;\r\n    }\r\n    $(\".open-modal\").click(function() {\r\n        openModal();\r\n    })\r\n    $(\".close-modal,.modal-overlay,.input-submit\").click(function() {\r\n        closeModal();\r\n    })\r\n\r\n    $modal.initBlur(0.5);\r\n\r\n})"]}